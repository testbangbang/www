package com.onyx.libedu.request.cloud;import com.onyx.android.sdk.data.utils.JSONObjectParseUtils;import com.onyx.libedu.BaseEduRequest;import com.onyx.libedu.EduCloudManager;import com.onyx.libedu.EduServiceFactory;import com.onyx.libedu.model.Result;import com.onyx.libedu.model.Textbook;import com.onyx.libedu.model.Version;import org.json.JSONObject;import java.util.ArrayList;import java.util.List;import java.util.Map;import retrofit2.Call;import retrofit2.Response;/** * Created by ming on 2016/11/1. */public class GetTextBooksRequest extends BaseEduRequest{    private long versionId;    private List<Textbook> textbooks;    public GetTextBooksRequest(long versionId) {        this.versionId = versionId;    }    @Override    public void execute(EduCloudManager parent) throws Exception {        Map<String, Object> paramMap = parent.createParamMap();        paramMap.put("versionId", versionId);        parent.sign(paramMap);//        Call<Result<List<Textbook>>> call = EduServiceFactory.getEduService(parent.getEduConf().getApiBase()).getTextbookList(paramMap);//        Response<Result<List<Textbook>>> response = call.execute();//        if (response.isSuccessful()) {//            Result<List<Textbook>> result = response.body();//            textbooks = result.getData();//        } else {//            String errorCode = JSONObjectParseUtils.httpStatus(response.code(), new JSONObject(response.errorBody().string()));//            throw new Exception(errorCode);//        }        textbooks = getTestData();    }    private List<Textbook> getTestData() {        ArrayList<Textbook> books = new ArrayList<>();        Textbook book = new Textbook();        book.setBookName("Java开发技术");        books.add(book);        return books;    }    public List<Textbook> getTextbooks() {        return textbooks;    }}